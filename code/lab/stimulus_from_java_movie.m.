function stimulus = stimulus_from_java_movie(movie)
% stimulus_from_java_movie     get stimulus information from an java movie object
%
% usage:  stimulus = stimulus_from_java_movie(movie)
%
% arguments:  movie - java object generated by edu.ucsc.neurobiology.vision.matlab.Matlab.computeMovie(<xml_path>,<triggers>)
%
% outputs:     stimulus - struct with the following fields
%
% stimulus.field_height     # of stixels top to bottom
% stimulus.field_width      # of stixels left to right
% stimulus.interval         # of monitor updates per stimulus refresh
% stimulus.independent      'nil' if r = g = b, 't' if r, g, & b are independent
%
%
% gauthier 2009-09
%
%




% assume monitor_refresh_rate is 120 Hz
% in the future, there should be a separate place to specify this so that it can vary
monitor_refresh_rate = 120;  % Hz


% refresh interval
stimulus.interval = round(movie.getRefreshTime * monitor_refresh_rate / 1000);

% X and Y size
stimulus.field_height = movie.getHeight;
stimulus.field_width = movie.getWidth;


% color
switch movie.getUnderlyingMovie.colorType
    case 'INDEPENDENT'
        stimulus.independent = 't';
    case 'DEPENDENT'
        stimulus.independent = 'nil';
    case 'SEPARATED'
        stimulus.independent = 't';
        stimulus.separated = 't';
end

% noise type
switch movie.getUnderlyingMovie.noiseType
    case 'GAUSSIAN_MOVIE'
        stimulus.type = ':gaussian';
    case 'BINARY_MOVIE'
        stimulus.type = ':binary';
end

% random number generator
switch movie.getUnderlyingMovie.rng
    case 'JAVA_RANDOM_V2'
        
    case 'MAC_RANDOM'
        fprintf('!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n
        
end

% contrast
% NOTE: contrast can be different on each gun, but the movie assumes the contrast is the same on every gun
% therefore this value can not be trusted.  The value is obtained by movie.getUnderlyingMovie.contrastValue
