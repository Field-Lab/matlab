function T_array_image_to_camera = identify_array_image_to_camera_transform(datarun)
% identify_array_image_to_camera_transform     use datarun.piece.rig and
%               datarun.piece.optical_path_direction to determine orientation and
%               mirroring of array image in camera coordinates.  The "array image" is 
%               generated by load_array_info.
%
%  note: this transformation does NOT account for scaling, offset, or small rotations,
%       which must be measured using photographic mapping.
%
%
% usage:  T_array_image_to_camera = identify_array_image_to_camera_transform(datarun)
%
% arguments:     datarun - datarun struct
%
% outputs:     T_array_image_to_camera - matlab transform struct
%
%
% 2010-01  gauthier
%




switch [datarun.piece.rig ' ' datarun.piece.optical_path_direction]
    case {'A above','A below','B above','B below'}
        T_array_image_to_camera = maketform('affine',[0 1;0 0;1 0],[0 1;0 0;1 0]);
    case 'C ablvoe'
    otherwise
        error('rig and optical path ''%s'' not recognized',[datarun.piece.rig ' ' datarun.piece.optical_path_direction])
end

